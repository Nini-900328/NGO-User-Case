@{
    ViewBag.Title = "活動內容";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>活動介紹頁</title>
    <style>
        .page-title {
            background-color: #fbd0a2;
            padding: 30px;
            text-align: center;
            font-size: 28px;
            color: white;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .page-wrapper {
            display: flex;
            flex-direction: column;
            padding: 2vw;
            gap: 2vw;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 2vw;
            width: 100%;
        }

        .image-section {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            gap: 1vw;
        }

        .single-image-box {
            background-color: #ddd;
            height: 20vw;
            border-radius: 12px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

            .single-image-box img {
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
            }

            .single-image-box input[type="file"] {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                opacity: 0;
                cursor: pointer;
            }


        .image-box {
            background-color: #ddd;
            height: 10vw;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            position: relative;
        }

            .image-box input[type="file"] {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                opacity: 0;
                cursor: pointer;
            }

        .description-section {
            flex: 2;
            min-width: 300px;
            background-color: #fdd;
            padding: 2vw;
            text-align: center;
            border-radius: 12px;
        }

        .text-box {
            background-color: #fee;
            padding: 1vw;
            text-align: center;
            border-radius: 8px;
        }

        .bottom-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2vw;
        }

        .progress {
            flex: 1;
            height: 20px;
            background-color: #eee;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-filled {
            height: 100%;
            width: 35%;
            background-color: pink;
        }

        .signup-btn {
            background-color: #faa;
            padding: 0.8vw 2vw;
            border: none;
            border-radius: 8px;
            font-size: 1.1vw;
            cursor: pointer;
        }


        {
            flex-direction: column;
        }

        .signup-btn {
            font-size: 16px;
        }

        }
    </style>
</head>
<body>
    <div class="page-title">
        @Model.ActivityName
    </div>
    <div class="page-wrapper">

        <div class="main-content">
            <!-- 左邊圖片區 -->
            <div class="image-section">
                <div class="single-image-box">
                    <img src="你的圖片網址或預留空白.png" alt="圖片上傳預覽" />

                </div>

                <div class="text-box">(Text)<br>參與條件說明</div>
            </div>

            <!-- 右邊說明區 -->
            <div class="description-section">
                <p>@Model.Description</p>
                <p>活動類別：@Model.Category</p>
                <p>活動期間：@Model.StartDate.ToShortDateString() - @Model.EndDate.ToShortDateString()</p>
            </div>
        </div>

        <!-- 底部進度條區塊 -->
        <div class="bottom-bar">
            <div id="signup-count">已報名：@Model.CurrentParticipants 人</div>
            <div class="progress">
                <div class="progress-filled" id="progress-bar" style="width:@((Model.CurrentParticipants * 100 / Model.MaxParticipants))%"></div>
            </div>
            <form asp-action="Signup" asp-controller="Event" asp-route-id="@Model.ActivityId" method="post">
                <button class="signup-btn" type="submit">立即報名</button>
            </form>
        </div>

    </div>
</body>
<script>
    let totalSlots = 20;  // 報名人數上限
    let signedUp = 0;     // 目前報名人數（實際可從後端取值）

    function updateSignupDisplay() {
        const text = document.getElementById("signup-count");
        const bar = document.getElementById("progress-bar");
        const btn = document.getElementById("signup-btn");

        text.textContent = `已報名：${signedUp}人`;

        let percent = Math.min((signedUp / totalSlots) * 100, 100);
        bar.style.width = percent + '%';

        if (signedUp >= totalSlots) {
            btn.disabled = true;
            btn.textContent = "報名額滿";
            btn.style.backgroundColor = "#ccc";
            btn.style.cursor = "not-allowed";
        }
    }

     function simulateSignup() {
        if (signedUp < totalSlots) {
            signedUp++;
            updateSignupDisplay();
            alert("報名完成！");
        }
    }


    document.addEventListener("DOMContentLoaded", updateSignupDisplay);

</script>


</html>