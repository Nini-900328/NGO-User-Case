@model HomeViewModel
@{
    ViewData["Title"] = "首頁";
}

@section Styles {
    <link rel="stylesheet" href="~/css/shared/homepage-new.css" />
}

<!-- 絲滑輪播圖區域 -->
<section class="hero-carousel">
    <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="4000">
        <div class="carousel-indicators">
            @for (int i = 0; i < Model.CarouselItems.Count; i++)
            {
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="@i"
                        class="@(i == 0 ? "active" : "")" aria-current="@(i == 0 ? "true" : "false")"
                        aria-label="Slide @(i + 1)"></button>
            }
        </div>
        <div class="carousel-inner">
            @for (int i = 0; i < Model.CarouselItems.Count; i++)
            {
                var item = Model.CarouselItems[i];
                <div class="carousel-item @(i == 0 ? "active" : "")">
                    <div class="carousel-slide">
                        <img src="@item.ImageUrl" alt="@item.Title" class="carousel-bg">
                        <div class="carousel-overlay"></div>
                        <div class="carousel-content">
                            <div class="container">
                                <div class="row justify-content-center">
                                    <div class="col-lg-8 text-center">
                                        <h1 class="carousel-title animate-up">@item.Title</h1>
                                        <p class="carousel-description animate-up delay-1">@item.Description</p>
                                        <div class="carousel-buttons animate-up delay-2">
                                            <a href="@item.ButtonLink" class="btn btn-primary btn-lg">
                                                <i class="fas fa-user-plus me-2"></i>@item.ButtonText
                                            </a>
                                            <a href="/Home/Organization" class="btn btn-outline-light btn-lg">
                                                <i class="fas fa-info-circle me-2"></i>了解更多
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</section>

<!-- 重新設計的影響力與成果展示區域 -->
<section class="impact-section py-5">
    <div class="container">
        <!-- 標題區域 -->
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="section-title mb-3">真實的影響力</h2>
                <p class="section-subtitle">每一個數字背後，都是改變生命的故事</p>
                <div class="title-decoration">
                    <div class="decoration-line"></div>
                    <div class="decoration-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="decoration-line"></div>
                </div>
            </div>
        </div>
        
        <!-- 核心成果統計 -->
        <div class="row g-4 mb-5">
            <div class="col-lg-4 col-md-6">
                <div class="impact-card primary-card">
                    <div class="card-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="card-content">
                        <h3 class="impact-number" data-count="@Model.ImpactStats.TotalCases">0</h3>
                        <p class="impact-label">受助個案</p>
                        <div class="impact-description">
                            <small>提供生活援助、就業輔導</small>
                        </div>
                    </div>
                    <div class="card-accent case-accent"></div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="impact-card primary-card">
                    <div class="card-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="card-content">
                        <h3 class="impact-number" data-count="@Model.ImpactStats.TotalActivities">0</h3>
                        <p class="impact-label">舉辦活動</p>
                        <div class="impact-description">
                            <small>技能培訓、心理支持、社區服務</small>
                        </div>
                    </div>
                    <div class="card-accent activity-accent"></div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="impact-card primary-card">
                    <div class="card-icon">
                        <i class="fas fa-hand-holding-heart"></i>
                    </div>
                    <div class="card-content">
                        <h3 class="impact-number" data-count="@Model.ImpactStats.TotalParticipants">0</h3>
                        <p class="impact-label">志工參與</p>
                        <div class="impact-description">
                            <small>熱心民眾共同參與公益</small>
                        </div>
                    </div>
                    <div class="card-accent volunteer-accent"></div>
                </div>
            </div>
        </div>

        <!-- 簡潔的服務品質展示 -->
        <div class="row">
            <div class="col-12">
                <div class="compact-quality-section">
                    <!-- 核心成就展示 -->
                    <div class="compact-achievements">
                        <div class="achievement-item">
                            <div class="achievement-visual">
                                <div class="circular-progress" data-percentage="95">
                                    <div class="circular-progress-inner">
                                        <span class="percentage-text">95%</span>
                                    </div>
                                </div>
                            </div>
                            <h6>案件成功率</h6>
                            <p>專業團隊確保服務品質</p>
                        </div>
                        
                        <div class="achievement-item">
                            <div class="achievement-visual">
                                <div class="rating-display">
                                    <div class="stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                    </div>
                                    <span class="rating-number">4.8</span>
                                </div>
                            </div>
                            <h6>服務滿意度</h6>
                            <p>用心服務獲得肯定</p>
                        </div>
                        
                        <div class="achievement-item">
                            <div class="achievement-visual">
                                <div class="network-visual">
                                    <div class="network-number">50+</div>
                                    <div class="network-label">合作夥伴</div>
                                </div>
                            </div>
                            <h6>合作網絡</h6>
                            <p>建立完善服務體系</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 活動快速報名區域 -->
<section class="activities-section py-5 bg-light">
    <div class="container">
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="section-title">即將舉行的活動</h2>
                <p class="section-subtitle">參與我們的活動，一起為社會帶來正面影響</p>
            </div>
        </div>
        
        @if (Model.RecentActivities.Any())
        {
            <div class="activity-carousel-container">
                <div id="activityCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="4000">
                    <div class="carousel-indicators">
                        @for (int i = 0; i < Model.RecentActivities.Count; i++)
                        {
                            <button type="button" data-bs-target="#activityCarousel" data-bs-slide-to="@i"
                                    class="@(i == 0 ? "active" : "")" aria-current="@(i == 0 ? "true" : "false")"
                                    aria-label="Activity @(i + 1)"></button>
                        }
                    </div>
                    
                    <div class="carousel-inner">
                        @for (int i = 0; i < Model.RecentActivities.Count; i++)
                        {
                            var activity = Model.RecentActivities[i];
                            <div class="carousel-item @(i == 0 ? "active" : "")">
                                <div class="modern-activity-card mx-auto">
                                    
                                    <div class="row g-0 h-100">
                                        <div class="col-md-6">
                                            <div class="activity-image-modern">
                                                @{
                                                    var imageUrl = "/images/activityback2.jpg"; // 使用現有的預設活動背景圖
                                                    if (!string.IsNullOrEmpty(activity.ImageUrl))
                                                    {
                                                        imageUrl = activity.ImageUrl;
                                                    }
                                                }
                                                
                                                <!-- 背景圖片 (模糊延伸) -->
                                                <div class="activity-bg-extended" style="background-image: url('@imageUrl')"></div>
                                                
                                                <!-- 主要圖片 -->
                                                <img src="@imageUrl" alt="@activity.ActivityName" class="activity-img">
                                                
                                                <!-- 底部漸層遮罩 -->
                                                <div class="activity-image-gradient"></div>
                                                
                                                <!-- 優雅的圖片覆蓋層效果 -->
                                                <div class="elegant-image-overlay">
                                                    <div class="overlay-content">
                                                        <div class="overlay-icon">
                                                            <i class="fas fa-eye"></i>
                                                        </div>
                                                        <div class="overlay-text">查看詳情</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6">
                                            <div class="activity-content-modern">
                                                <h3 class="activity-title-modern">@activity.ActivityName</h3>
                                                <p class="activity-description-modern">@activity.Description</p>
                                                
                                                <div class="activity-meta-info">
                                                    <div class="meta-item location-info">
                                                        <div class="meta-icon">
                                                            <i class="fas fa-map-marker-alt"></i>
                                                        </div>
                                                        <div class="meta-content">
                                                            <span class="meta-label">活動地點</span>
                                                            <span class="meta-value">@activity.Location</span>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="meta-item time-info">
                                                        <div class="meta-icon">
                                                            <i class="fas fa-clock"></i>
                                                        </div>
                                                        <div class="meta-content">
                                                            <span class="meta-label">活動時間</span>
                                                            <span class="meta-value">@activity.StartDate.ToString("yyyy/MM/dd")</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="activity-progress-modern">
                                                    <div class="progress-header">
                                                        <span class="progress-label">報名進度</span>
                                                        <span class="progress-percentage">@(activity.MaxParticipants > 0 ? Math.Round((double)activity.CurrentParticipants / activity.MaxParticipants * 100, 1) : 0)%</span>
                                                    </div>
                                                    <div class="progress-bar-modern">
                                                        <div class="progress-fill" style="width: @(activity.MaxParticipants > 0 ? (activity.CurrentParticipants * 100 / activity.MaxParticipants) : 0)%"></div>
                                                    </div>
                                                </div>
                                                
                                                <div class="activity-actions-modern">
                                                    <a href="/Activity/Details/@activity.ActivityId" class="btn-modern primary">
                                                        <i class="fas fa-info-circle"></i>
                                                        <span>了解詳情</span>
                                                    </a>
                                                    <a href="/Auth/Login" class="btn-modern secondary" onclick="sessionStorage.setItem('showPlaneAnimation', 'true')">
                                                        <i class="fas fa-user-plus"></i>
                                                        <span>立即報名</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    
                    <button class="carousel-control-prev" type="button" data-bs-target="#activityCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#activityCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        }
        else
        {
            <div class="row">
                <div class="col-12 text-center">
                    <div class="no-activities">
                        <i class="fas fa-calendar-times mb-3"></i>
                        <h4>暫無活動</h4>
                        <p>目前沒有可報名的活動，請稍後再查看</p>
                    </div>
                </div>
            </div>
        }
    </div>
</section>

<!-- 呼籲行動區域 -->
<section class="cta-section py-5" style="background-color:lightgray !important">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h3 class="cta-title">準備好開始行動了嗎？</h3>
                <p class="cta-description">
                    無論您是想要協助他人的志工，還是需要幫助的個案，我們都歡迎您的加入。
                    讓我們一起為建設更美好的社會而努力。
                </p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a href="/Auth/Register" class="btn btn-primary btn-lg me-3" onclick="sessionStorage.setItem('showPlaneAnimation', 'true')">
                    <i class="fas fa-user-plus me-2"></i>註冊加入
                </a>
                <a href="/Home/Contact" class="btn btn-warning btn-lg">
                    <i class="fas fa-phone me-2"></i>聯絡我們
                </a>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script src="~/js/homepage-new.js"></script>
}